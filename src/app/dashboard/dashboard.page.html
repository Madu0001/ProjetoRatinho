<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-title>Dashboard de Monitoramento</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Dashboard</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="container">
    <!-- Card de Leitura Mais Recente -->
    <ion-card *ngIf="dados && dados.length > 0" class="destaque-card">
      <ion-card-header>
        <ion-card-subtitle>
          <ion-icon name="pulse-outline"></ion-icon>
          Leitura Mais Recente
        </ion-card-subtitle>
      </ion-card-header>
      <ion-card-content>
        <div class="leitura-atual">
          <div class="medicao">
            <ion-icon name="thermometer-outline" color="danger"></ion-icon>
            <div class="info">
              <span class="valor">{{dados[dados.length - 1]["temperatura"]}}째C</span>
              <span class="label">Temperatura</span>
            </div>
          </div>
          <div class="medicao">
            <ion-icon name="water-outline" color="primary"></ion-icon>
            <div class="info">
              <span class="valor">{{dados[dados.length - 1]["umidade"]}}%</span>
              <span class="label">Umidade</span>
            </div>
          </div>
        </div>
        <div class="timestamp-atual">
          <ion-icon name="time-outline"></ion-icon>
          {{dados[dados.length - 1]["timestamp"]}}
        </div>
      </ion-card-content>
    </ion-card>

    <!-- Hist처rico de Leituras -->
    <div class="historico-header">
      <ion-icon name="bar-chart-outline"></ion-icon>
      <h2>Hist처rico de Leituras</h2>
    </div>

    <ion-card *ngFor="let i of dados.slice().reverse().slice(1)" class="historico-card">
      <ion-card-content>
        <div class="leitura-historico">
          <div class="dados-row">
            <div class="dado-item">
              <ion-icon name="thermometer-outline" color="danger"></ion-icon>
              <span class="valor-small">{{i["temperatura"]}}째C</span>
            </div>
            <div class="dado-item">
              <ion-icon name="water-outline" color="primary"></ion-icon>
              <span class="valor-small">{{i["umidade"]}}%</span>
            </div>
          </div>
          <div class="timestamp-historico">
            <ion-icon name="time-outline"></ion-icon>
            {{i["timestamp"]}}
          </div>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>

<style>
  .container {
    padding: 16px; 
    max-width: 800px;
    margin: 0 auto;
  }

  .destaque-card {
    background: linear-gradient(135deg, #fa5e5e 0%, #5295fa 100%);
    color: white;
    margin-bottom: 24px;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
  }

  .destaque-card ion-card-header {
    padding-bottom: 8px;
  }

  .destaque-card ion-card-subtitle {
    color: rgb(255, 255, 255);
    font-size: 14px;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .leitura-atual {
    display: flex;
    justify-content: space-around;
    gap: 20px;
    margin: 20px 0;
  }

  .medicao {
    display: flex;
    align-items: center;
    gap: 12px;
    flex: 1;
  }

  .medicao ion-icon {
    font-size: 40px;
  }

  .medicao .info {
    display: flex;
    flex-direction: column;
  }

  .medicao .valor {
    font-size: 32px;
    font-weight: bold;
    line-height: 1;
  }

  .medicao .label {
    font-size: 14px;
    opacity: 0.9;
    margin-top: 4px;
  }

  .timestamp-atual {
    text-align: center;
    padding-top: 16px;
    border-top: 1px solid rgba(255, 255, 255, 0.3);
    font-size: 13px;
    opacity: 0.9;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
  }

  .historico-header {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 24px 0 16px 4px;
    color: var(--ion-color-medium);
  }

  .historico-header h2 {
    margin: 0;
    font-size: 18px;
    font-weight: 600;
  }

  .historico-header ion-icon {
    font-size: 24px;
  }

  .historico-card {
    margin-bottom: 12px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .historico-card ion-card-content {
    padding: 14px;
  }

  .leitura-historico {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }

  .dados-row {
    display: flex;
    gap: 24px;
  }

  .dado-item {
    display: flex;
    align-items: center;
    gap: 8px;
    flex: 1;
  }

  .dado-item ion-icon {
    font-size: 24px;
  }

  .valor-small {
    font-size: 18px;
    font-weight: 600;
  }

  .timestamp-historico {
    font-size: 12px;
    color: var(--ion-color-medium);
    display: flex;
    align-items: center;
    gap: 4px;
    padding-top: 8px;
    border-top: 1px solid var(--ion-color-light);
  }

  .timestamp-historico ion-icon {
    font-size: 14px;
  }
</style>